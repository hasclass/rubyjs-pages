{"tagline":"","body":"#### State of this project:\r\n\r\nThis project is pre-alpha (whatever that means). Implemented are roughly 80% of the methods from Array, Enumerable, String, Range, Numeric, Float, Integer. Check the current progress in progress.txt. Most big issues have been solved and I am finishing the remaining methods, trying to find the right tradeoffs and smart ways to package things together.\r\n\r\n## RubyJS\r\n\r\nA port of the Ruby 1.9.3 corelib to coffeescript/javascript/node that conforms to rubyspec.org and does not pollute the global javascript namespace. It is not an attempt to port or mimic the ruby object model and metaprogramming capabilities, whatsoever. \r\n\r\nWhy? Coffeescript made it easy to switch from ruby/python. Unfortunately I quickly missed the functionality of the ruby corelib (the very core part of it, String, Array, Numeric, etc.). \r\n\r\nIn numbers (as of 2012-07-25): 230 methods, 900 specs, gzipped ~10kb, minified ~40kb.\r\n\r\n### Features\r\n\r\n- Methods comply 1 to 1 to ruby code (tested by ~1000 rubyspec tests), down to raising the same Error types. \r\n- All methods of the core ruby classes, excluding ruby specifics and bit operators.\r\n- Enumerators, Iterators, Enumerable. Chainable and extendible.\r\n- Consistent breaking out of loops using: catch_break (breaker) -> breaker.break().\r\n- Methods automatically box/coerce native JS primitives into the right RubyJS type.\r\n- Small filesize: 10-20kb minified and gzipped.\r\n\r\n### RubyJS Code samples\r\n\r\n```coffeescript\r\n# ** All return values are instances of rubyjs classes. **\r\n\r\n## Numbers -----------------------------------------------------\r\n\r\n_r(1.0123).round(2)               # => 1.01\r\n\r\n## String ------------------------------------------------------\r\n_r(\"-\").multiply(10)              # => \"--------------\"\r\n\r\nstr = _r(\"hello world\")\r\nstr.capitalize().ljust(20, '-')   # => \"Hello world--------\"\r\n\r\nwords = str.scan(/\\w+/)           # => ['hello', 'world']\r\n_r(\"a\").upto(\"f\").to_a()          # => ['a', 'b', 'c', 'd', 'e']\r\n\r\n## Iterators, Enumerators --------------------------------------\r\nwords.map (w) -> w.capitalize()   # => ['Hello', 'World']\r\n\r\n## StringToProc mimics SymbolToProc\r\nwords.map(\"succ_bang\")            # => ['Hellp', 'Worle']\r\n\r\n## use coffeescript iterators:\r\nw.capitalize() for w in words.iterator()\r\n\r\n## chaining enumerators:\r\n_r([123]).each_with_object('foo').each_with_index (a_b, idx) -> \r\n# => a_b : [123, 'foo'], idx => 0\r\n\r\n_r(5).upto(10) (i) -> # ...\r\n_r(5).upto(10).to_a()             # => [5,6,7,8,9]\r\n_r(5).upto(10).inject(\"+\")        # => 35\r\n\r\n## bang methods\r\nstr.capitalize_bang()\r\nstr                               # => 'Hello world'\r\n\r\n## Chainable: rubyjs methods return rubyjs objects\r\n_r(\"hello\").size()                # => 5\r\n\r\n```\r\n\r\n## Why porting the Ruby core lib\r\n\r\nThere is no standard core library for JS/Coffee. jQuery and underscorejs do not offer the functionality I needed. \r\n\r\n- The Ruby corelib is fantastic and battle proven. \r\n- Not reinventing the wheel, ruby developers are immediately productive\r\n- Rubyspec has a complete (rspec) testsuite that can be ported to coffeescript easily (a matter of Find/Replace)\r\n- Rubinius gives us an implementation of all corelib classes/methods. Not sure how to implement String#scan, check the rubinius source.\r\n- With the corelib, porting additional rubygems to Coffeescript becomes doable\r\n- Porting from rubinius to rubyjs is fun. completely speced and testdriven. Also it's a great way to learn both languages.\r\n\r\n## Getting Started\r\n\r\n- Clone repository\r\n- Run the coffee console loading the rubyjs files:\r\n\r\n```\r\n/path/to/rubyjs $ coffee -r ./lib/ruby.coffee\r\ncoffee> _r('hello world').capitalize()\r\n\"Hello World\"\r\ncoffee> _r('hello world').capitalize().unbox()\r\n'Hello world'\r\n```\r\n\r\n- Setup development environment:\r\n\r\n```\r\n$ bundle install\r\n$ cake setup_tests            # compiles all test files\r\n$ bundle exec guard           # automatically compile coffeescript\r\n$ rake jasmine                # starts jasmine server\r\n$ open http://localhost:8888  # pray\r\n```\r\n\r\nIf you get an error like Error: spawn EMFILE and you're on a mac, check this thread:\r\nhttps://groups.google.com/forum/?fromgroups#!topic/nodejs/jeec5pAqhps\r\n\r\n\r\n\r\n## Assorted details\r\n\r\n#### Ruby method equivalents\r\n\r\n```\r\n# slightly outdated, needs to be updated.\r\nObject#foo?     = Object#foo\r\nObject#foo!     = Object#foo_bang\r\n\r\nObject['<<']    = Object#push\r\nObject['<=>']   = Object#cmp\r\nObject['==']    = Object#equal\r\nObject['===']   = Object#equal_case\r\nObject['<']     = Object#lt\r\nObject['<=']    = Object#lteq\r\nObject['>']     = Object#gt\r\nObject['>=']    = Object#gteq\r\nObject['**']    = ?\r\nObject['*']     = Object#multiply\r\nObject['/']     = Object#divide\r\nObject['%']     = Object#modulo\r\nObject['+']     = Object#plus\r\nObject['-']     = Object#minus\r\n```\r\n\r\n#### No monkey patching js core classes. Dont interfere with the global namespace\r\n\r\nAll JSRuby classes sit in an own namespace. Temporarly it is: **_r**\r\n\r\n```coffeescript\r\nstr = \"hello\"\r\nstr.capitalize() \r\n# => Throws NoMethodError\r\n\r\nstr = new rubyjs.String(\"hello\");\r\nstr.capitalize() \r\n# => <rubyjs.String \"Hello\">\r\n```\r\n\r\n#### Boxing/Unboxing\r\n\r\nFor classes that have js core classes or primitives, e.g. String, Date, Array, convert from core to JSRuby classes and back using boxing and unboxing. Boxing a primitive to their JSRuby counterpart is done using **_r( value )**. Unboxing a JSRuby object to their primitive counterpart by calling obj.**unbox()** and recursivively **unbox(true)**.\r\n\r\nBoxing primitive values using _r():\r\n\r\n```coffeescript\r\njs_string = \"hello\"\r\n# => \"hello\"\r\n\r\n_r(\"hello\")\r\n# => <rubyjs.String \"hello\">\r\n```\r\n\r\nTo get the JS core primitives back we can unbox() them:\r\n\r\n```coffeescript\r\n_r(\"hello\").unbox()\r\n# => \"hello\"\r\n\r\n_r(\"hello\").capitalize().unbox()\r\n# => \"hello\"\r\n```\r\n\r\nUnboxing can be made recursive by calling unbox(true). Useful for arrays:\r\n\r\n\r\n```coffeescript\r\n_r(\"hello world\").scan(/\\w+/).unbox()\r\n# => [ <rubyjs.String \"hello\">, <rubyjs.String \"hello\"> ]\r\n\r\n_r(\"hello world\").scan(/\\w+/).unbox(true)\r\n# => [ 'hello', 'hello' ]\r\n```\r\n\r\n#### Chainable: JSRuby return values are JSRuby objects. \r\n\r\nWhen using JSRuby methods, the return values will become JSRuby objects. This allows for chaining methods.\r\n\r\n```coffeescript\r\n_r(\"hello\").capitalize()\r\n# => <rubyjs.String \"hello\">\r\n\r\n_r(\"hello\").capitalize().ljust(10, '-')\r\n# => <rubyjs.String \"Hello------\">\r\n\r\n_r(\"hello world\").scan(/\\w+/)\r\n# => <rubyjs.Array [ <rubyjs.String \"hello\">, <rubyjs.String \"hello\"> ]>\r\n```\r\n\r\n#### Porting to rubyspec.org\r\n\r\nPorting the rubyspecs is easy. Clone the rubinius repository, copy a spec file: \r\n\r\n```ruby\r\n# /path/to/rubinius/spec/ruby/core/string/ljust_spec.rb\r\n\r\ndescribe \"String#ljust with length, padding\" do\r\n  it \"returns a new string of specified length with self left justified and padded with padstr\" do\r\n    \"hello\".ljust(20, '1234').should == \"hello123412341234123\"\r\n\r\n    \"\".ljust(1, \"abcd\").should == \"a\"\r\n    \"\".ljust(2, \"abcd\").should == \"ab\"\r\n    \"\".ljust(3, \"abcd\").should == \"abc\"\r\n    # ...\r\n  end\r\n  # ...\r\n```\r\n\r\nReplace \" do\" with \", ->\", the \".should ==\" with \"expect(...).toEqual \". And add the boxing and unboxing methods.\r\n\r\n```coffeescript\r\n# /path/to/rubyjs/spec/corelib/string/ljust_spec.coffee\r\n\r\ndescribe \"String#ljust with length, padding\", ->\r\n  it \"returns a new string of specified length with self left justified and padded with padstr\", ->\r\n    expect(_r(\"hello\").ljust(20, '1234').unbox()).toEqual(\"hello123412341234123\")\r\n\r\n    expect(_r(\"\").ljust(1, \"abcd\").unbox()).toEqual(\"a\")\r\n    expect(_r(\"\").ljust(2, \"abcd\").unbox()).toEqual(\"ab\")\r\n    expect(_r(\"\").ljust(3, \"abcd\").unbox()).toEqual(\"abc\")\r\n```\r\n\r\n# Development\r\n\r\n\r\n```\r\n# Generate documenation:\r\nnpm install -g codo\r\ncodo lib/\r\n```\r\n","note":"Don't delete this file! It's used internally to help with page regeneration.","google":"UA-33740484-2","name":"RubyJS"}